<h1>Listing students</h1>

<table>
  <thead>
    <tr>
			<th>Име</th>
			<th>Номер</th>
      <th>Клас</th>
			<% if @current_user.admin? %>
				<th>Акаунт</th>
				<th>ID</th>
			<% end %>		
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @students.each do |student| %>
      <tr>
				<td><%= student.name %></td>
				<td><%= student.number %></td>
        <td><%= student.grade %></td>
				<% if @current_user.admin? %>
					<td><%= student.user_name %></td>
					<td><%= student.id %></td>
				<% end %>
        <td><%= link_to 'Show', student %></td>
        <td><%= link_to 'Edit', edit_student_path(student) %></td>
        <td><%= link_to 'Destroy', student, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<script>
var table = $('table');

$('#facility_header, #city_header')
    .wrapInner('<span title="sort this column"/>')
    .each(function(){

        var th = $(this),
            thIndex = th.index(),
            inverse = false;

        th.click(function(){

            table.find('td').filter(function(){

                return $(this).index() === thIndex;

            }).sortElements(function(a, b){

                if( $.text([a]) == $.text([b]) )
                    return 0;

                return $.text([a]) > $.text([b]) ?
                    inverse ? -1 : 1
                    : inverse ? 1 : -1;

            }, function(){

                // parentNode is the element we want to move
                return this.parentNode; 

            });

            inverse = !inverse;

        });

    });
	</script>
<br>


<%= link_to 'Нов ученик', new_student_path %>
